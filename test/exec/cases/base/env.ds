import-env HOME

assert($HOME is String)
assert($HOME == "$(echo ~)")

# illegal env
try {
    import-env hferur
    assert($false)
} catch($e : Error) {
    assert($e is SystemError)
}

# default value
import-env zaswd :
    "default env"
assert($zaswd == "default env")

# update imported env
import-env SHLVL
$SHLVL = "999"
assert("$(printenv SHLVL)" == "999")

assert("$(printenv zaswd)" == "default env")
$zaswd = "hello env"
assert("$(printenv zaswd)" == "hello env")

# export
export-env ZZZ = $HOME
assert($ZZZ is String)
assert($ZZZ == $HOME)
assert("$(printenv ZZZ)" == "$HOME")
$ZZZ = "hey"
assert($ZZZ == "hey")
assert("$(printenv ZZZ)" == "hey")
$ZZZ += 12
assert("$(printenv ZZZ)" == "hey12")

# local
{
    export-env HOGE = "hello hoge"
    assert("$(printenv HOGE)" == "hello hoge")
    $HOGE = "world"
    assert("$(printenv HOGE)" == "world")
}
assert("$(printenv HOGE)" == "world")
