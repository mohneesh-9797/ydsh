
# invalid
assert { bg; $?; } == 1
assert "$(bg 2>&1)" == 'ydsh: bg: current: no such job'

assert { bg hoge %1; $?; } == 1
assert "$(bg hoge %1 2>&1)" == $'ydsh: bg: hoge: no such job\nydsh: bg: %1: no such job'


var j = {
    %'stop'.kill($PID)
    exit 99
} &
assert not $j.wait()
assert { bg; $?; } == 0
assert $j.wait()! == 99

$j = {
    %'stop'.kill($PID)
    exit 99
} &
assert not $j.wait()
assert { bg %1 %2; $?; } == 1
assert $j.wait()! == 99

true