#$test($result = 'exit', $lineNum = 12, $status = 1)

function raise($s : String) {
    eval "$(which kill)" -s $SIG[$s] $PID
}

function f($s : Signal) {
    throw $s
}

function g($s : Signal) {
    exit $s
}

$SIG.trap(%'int', $f)

try {
    $raise('int')
} catch $e {
    assert $e is Signal
    assert ($e as Signal).name() == %'int'.name()
}

$SIG.trap(%'hup', $g)
$raise('hup')

exit 0