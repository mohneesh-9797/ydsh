var a = "$(/bin/echo hello world)"
assert($a == 'hello world')

# tilde expansion
# expand to HOME
import-env HOME
assert($HOME == "$(echo ~)")
assert($HOME + "/" == "$(echo ~/)")
assert($HOME + "/hoge" == "$(echo ~/hoge)")
assert("~g" == "$(echo ~'g')")
assert($HOME + "/h" == "$(echo ~/'h')")

# expand to PWD
assert($PWD == "$(echo ~+)")
assert($PWD + "/" == "$(echo ~+/)")
assert($PWD + "/huge" == "$(echo ~+/huge)")
assert($PWD + "/huge" == "$(echo ~+/"huge")")
assert("~+e" == "$(echo ~+e)")
assert("~+e" == "$(echo ~+'e')")

# expand to OLDPWD
assert($OLDPWD == "$(echo ~-)")
assert($OLDPWD + "/" == "$(echo ~-/)")
assert($OLDPWD + "/we" == "$(echo ~-/we)")
assert($OLDPWD + "/false" == "$(echo ~-/$false)")
assert("~-yfr" == "$(echo ~-yfr)")
assert("~-true" == "$(echo ~-$true)")