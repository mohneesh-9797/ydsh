
let __TERM_HOOKS = new [(Int32, typeof($TERM_HOOK!))]()

function __defaultHook($s : Int32, $e : Any) {
    for $hook in $__TERM_HOOKS {
        if ($hook._0 and $s) > 0 {
            $hook._1($s, $e)
        }
    }
}

function addTermHook($s : Int32, $h : typeof($TERM_HOOK!)) {
    $__TERM_HOOKS.add(($s, $h))
}

$TERM_HOOK = $__defaultHook
